<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="theme-color" content="#25D366">
    <title>Veneer Gigi - Solusi Senyum Instan</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #f4f4f4;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            background-color: white;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }

        .section {
            width: 100%;
            line-height: 0;
        }

        .section img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* TOMBOL PESAN DI DALAM LANDING PAGE */
        .cta-section {
            background: linear-gradient(135deg, #25D366, #128C7E);
            padding: 40px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .cta-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {

            0%,
            100% {
                transform: translate(0, 0);
            }

            50% {
                transform: translate(10%, 10%);
            }
        }

        /* PANAH DEKORATIF */
        .animated-arrows-container {
            pointer-events: none;
            display: flex;
            align-items: center;
            height: 237px;
            overflow: hidden;
            padding-top: 79px;
            margin-top: -79px;
            margin-bottom: -79px;
            position: relative;
            width: 100%;
        }

        .arrow-wrapper {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .arrow-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .arrow-group {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .arrow {
            position: absolute;
            width: 32px;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
        }

        .arrow-inner {
            transform: translateY(-3.41653px);
        }

        .arrow-left {
            transform: rotate(30deg) translateX(72px) translateY(-40px) scaleX(-1) translateX(-50%);
        }

        .arrow-right {
            transform: rotate(-30deg) translateX(-72px) translateY(-40px) translateX(-50%);
        }

        .arrow-center {
            transform: translateX(-50%);
        }

        /* ANIMASI FLOATING/BOUNCE */
        .floating-arrow {
            animation: floating 3s ease-in-out infinite;
        }

        /* Animasi untuk setiap panah dengan delay berbeda */
        .arrow-left {
            animation: floating 3s ease-in-out infinite,
                rotateLeft 4s ease-in-out infinite;
            animation-delay: 0s, 0.5s;
        }

        .arrow-right {
            animation: floating 3s ease-in-out infinite,
                rotateRight 4s ease-in-out infinite;
            animation-delay: 0.2s, 0.7s;
        }

        .arrow-center {
            animation: floating 3s ease-in-out infinite,
                bounce 2s ease-in-out infinite;
            animation-delay: 0.4s, 0s;
        }

        @keyframes floating {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-15px);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateX(-50%) scale(1);
            }

            50% {
                transform: translateX(-50%) scale(1.05);
            }
        }

        @keyframes rotateLeft {

            0%,
            100% {
                transform: rotate(30deg) translateX(72px) translateY(-40px) scaleX(-1) translateX(-50%);
            }

            50% {
                transform: rotate(35deg) translateX(72px) translateY(-40px) scaleX(-1) translateX(-50%);
            }
        }

        @keyframes rotateRight {

            0%,
            100% {
                transform: rotate(-30deg) translateX(-72px) translateY(-40px) translateX(-50%);
            }

            50% {
                transform: rotate(-35deg) translateX(-72px) translateY(-40px) translateX(-50%);
            }
        }

        /* Efek glow/pulsing */
        .floating-arrow svg {
            filter: drop-shadow(0 0 8px rgba(255, 0, 0, 0.3));
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from {
                filter: drop-shadow(0 0 8px rgba(255, 0, 0, 0.3));
            }

            to {
                filter: drop-shadow(0 0 12px rgba(255, 0, 0, 0.6));
            }
        }

        /* Smooth transition untuk transform */
        .arrow {
            transition: transform 0.5s ease;
        }

        .countdown-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 16px 20px;
            margin: 0 auto 20px;
            max-width: 380px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            position: relative;
            z-index: 3;
        }

        .countdown-label {
            color: #d63031;
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 12px;
        }

        .countdown-item {
            text-align: center;
        }

        .countdown-value {
            background: #d63031;
            color: white;
            font-size: 28px;
            font-weight: 700;
            padding: 8px 12px;
            border-radius: 8px;
            min-width: 50px;
            display: inline-block;
            box-shadow: 0 2px 8px rgba(214, 48, 49, 0.3);
        }

        .countdown-unit {
            font-size: 11px;
            color: #555;
            margin-top: 4px;
            font-weight: 600;
        }

        @media (max-width: 480px) {
            .countdown-container {
                padding: 12px 16px;
                margin: 0 10px 15px;
            }

            .countdown-label {
                font-size: 12px;
            }

            .countdown-value {
                font-size: 24px;
                padding: 6px 10px;
                min-width: 45px;
            }

            .countdown-unit {
                font-size: 10px;
            }

            .countdown-timer {
                gap: 8px;
            }

            .animated-arrows-container {
                height: 150px;
                padding-top: 50px;
                margin-top: -50px;
                margin-bottom: -50px;
            }

            .arrow {
                width: 20px;
            }

            .arrow-left {
                transform: rotate(30deg) translateX(45px) translateY(-25px) scaleX(-1) translateX(-50%);
            }

            .arrow-right {
                transform: rotate(-30deg) translateX(-45px) translateY(-25px) translateX(-50%);
            }
        }

        @media (max-width: 360px) {
            .countdown-value {
                font-size: 20px;
                padding: 5px 8px;
                min-width: 40px;
            }
        }

        @media (max-width: 768px) {
            .animated-arrows-container {
                height: 180px;
                padding-top: 60px;
                margin-top: -60px;
                margin-bottom: -60px;
            }

            .arrow {
                width: 24px;
            }

            .arrow-left {
                transform: rotate(30deg) translateX(54px) translateY(-30px) scaleX(-1) translateX(-50%);
            }

            .arrow-right {
                transform: rotate(-30deg) translateX(-54px) translateY(-30px) translateX(-50%);
            }

            @keyframes rotateLeft {

                0%,
                100% {
                    transform: rotate(30deg) translateX(54px) translateY(-30px) scaleX(-1) translateX(-50%);
                }

                50% {
                    transform: rotate(35deg) translateX(54px) translateY(-30px) scaleX(-1) translateX(-50%);
                }
            }

            @keyframes rotateRight {

                0%,
                100% {
                    transform: rotate(-30deg) translateX(-54px) translateY(-30px) translateX(-50%);
                }

                50% {
                    transform: rotate(-35deg) translateX(-54px) translateY(-30px) translateX(-50%);
                }
            }
        }

        .stock-alert {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 15px;
            display: inline-block;
            animation: pulse 2s infinite;
            position: relative;
            z-index: 3;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.8;
            }
        }

        .stock-alert .emoji {
            font-size: 16px;
        }

        .cta-title {
            color: white;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 3;
        }

        .cta-subtitle {
            color: rgba(255, 255, 255, 0.95);
            font-size: 16px;
            margin-bottom: 25px;
            position: relative;
            z-index: 3;
        }

        @media (max-width: 480px) {
            .cta-section {
                padding: 30px 15px;
            }

            .cta-title {
                font-size: 20px;
                margin-bottom: 10px;
            }

            .cta-subtitle {
                font-size: 14px;
                margin-bottom: 20px;
            }

            .stock-alert {
                font-size: 13px;
                padding: 8px 14px;
                margin-bottom: 12px;
            }
        }

        @media (max-width: 360px) {
            .cta-title {
                font-size: 18px;
            }

            .cta-subtitle {
                font-size: 13px;
            }
        }

        .pesan-sekarang-btn {
            background: white;
            color: #128C7E;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            z-index: 3;
        }

        .pesan-sekarang-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .pesan-sekarang-btn:active {
            transform: translateY(0);
        }

        .footer {
            background-color: #000;
            padding: 40px 0;
            text-align: center;
        }

        .footer img {
            width: 80px;
        }

        /* FLOATING CHAT BUTTON - STANDAR */
        .chat-fab {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: #25D366;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .chat-fab:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
        }

        .chat-fab svg {
            width: 32px;
            height: 32px;
            fill: white;
        }

        /* ===================================
           CHAT WINDOW - FIXED UNTUK MOBILE
           =================================== */
        .chat-window {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 400px;
            max-width: calc(100vw - 40px);
            height: calc(100vh - 180px);
            max-height: 650px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 999;
            opacity: 0;
            transform: translateY(20px) scale(0.95);
            transition: all 0.3s ease;
        }

        .chat-window.open {
            display: flex;
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* CHAT HEADER */
        .chat-header {
            background: #075E54;
            color: white;
            padding: 16px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
            /* PENTING: Jangan shrink */
        }

        .chat-header-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chat-title {
            font-size: 16px;
            font-weight: 600;
        }

        .chat-status {
            font-size: 13px;
            opacity: 0.9;
        }

        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* CHAT MESSAGES - FIXED */
        .chat-messages {
            flex: 1;
            min-height: 0;
            /* ‚≠ê CRITICAL: Allow flexbox shrinking */
            padding: 20px 16px;
            background: #ECE5DD;
            overflow-y: auto;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            gap: 10px;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }

        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }

        .msg {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 15px;
            line-height: 1.6;
            word-wrap: break-word;
            word-break: break-word;
            white-space: pre-wrap;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            animation: msgPop 0.3s ease;
        }

        @keyframes msgPop {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .msg.bot {
            background: white;
            align-self: flex-start;
            border-radius: 8px 8px 8px 2px;
        }

        .msg.user {
            background: #DCF8C6;
            align-self: flex-end;
            border-radius: 8px 8px 2px 8px;
        }

        .msg strong {
            font-weight: 700;
        }

        /* TYPING INDICATOR - FIXED */
        .typing {
            display: none;
            align-self: flex-start;
            background: white;
            padding: 12px 16px;
            border-radius: 8px 8px 8px 2px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
            /* PENTING: Jangan shrink */
        }

        .typing.active {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #90949c;
            border-radius: 50%;
            animation: typingBounce 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingBounce {

            0%,
            60%,
            100% {
                transform: translateY(0);
            }

            30% {
                transform: translateY(-8px);
            }
        }

        /* ACTION CHIPS - FIXED */
        .chat-actions {
            padding: 12px 20px;
            background: #ECE5DD;
            display: none;
            flex-wrap: wrap;
            gap: 8px;
            max-height: 120px;
            /* Kurangi height */
            overflow-y: auto;
            flex-shrink: 0;
            /* PENTING: Jangan shrink */
        }

        .action-chip {
            background: white;
            color: #075E54;
            border: 1px solid #DCF8C6;
            padding: 10px 18px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .action-chip:hover {
            background: #DCF8C6;
            transform: translateY(-2px);
        }

        .action-chip:active {
            transform: translateY(0);
        }

        /* INPUT AREA - FIXED */
        .chat-input-area {
            padding: 12px 20px;
            padding-bottom: max(12px, env(safe-area-inset-bottom));
            /* iOS safe area */
            background: #F0F0F0;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-shrink: 0;
            /* ‚≠ê CRITICAL: Jangan pernah shrink */
            border-top: 1px solid #ddd;
            /* Visual separator */
        }

        .chat-input-area input {
            flex: 1;
            border: 1px solid #ddd;
            padding: 12px 16px;
            border-radius: 24px;
            outline: none;
            font-size: 16px;
            /* ‚≠ê Prevent iOS zoom */
            background: white;
        }

        .chat-input-area input:focus {
            border-color: #075E54;
        }

        .send-btn {
            width: 44px;
            height: 44px;
            background: #075E54;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
            /* Prevent shrinking */
        }

        .send-btn:hover {
            background: #054d44;
        }

        .send-btn svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        /* SPINNER */
        .spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* ===================================
           MOBILE RESPONSIVE - FIXED
           =================================== */
        @media (max-width: 768px) {
            .chat-window {
                width: 100vw;
                height: 100dvh;
                /* ‚≠ê Use dvh for dynamic viewport */
                max-height: 100dvh;
                bottom: 0;
                right: 0;
                left: 0;
                top: 0;
                border-radius: 0;
                max-width: 100vw;
            }

            /* ‚≠ê CRITICAL: Ensure all children respect flex */
            .chat-window.open {
                display: flex !important;
                flex-direction: column;
            }

            .chat-header {
                padding: 16px;
                flex-shrink: 0;
            }

            .chat-title {
                font-size: 17px;
            }

            .chat-status {
                font-size: 14px;
            }

            /* Messages container */
            .chat-messages {
                flex: 1 1 auto;
                /* Allow grow and shrink */
                min-height: 0;
                /* Critical */
                padding: 16px 12px;
                padding-bottom: 8px;
            }

            .msg {
                max-width: 85%;
                font-size: 15px;
                padding: 12px 14px;
                line-height: 1.5;
            }

            /* Typing indicator */
            .typing {
                flex-shrink: 0;
            }

            /* Action chips */
            .chat-actions {
                padding: 12px 16px;
                max-height: 100px;
                flex-shrink: 0;
            }

            .action-chip {
                font-size: 15px;
                padding: 11px 18px;
            }

            /* Input area - MOST IMPORTANT */
            .chat-input-area {
                padding: 12px 16px;
                padding-bottom: max(12px, env(safe-area-inset-bottom));
                flex-shrink: 0;
                /* ‚≠ê NEVER shrink */
                min-height: 68px;
                /* Ensure minimum height */
            }

            .chat-input-area input {
                font-size: 16px;
                /* Prevent iOS zoom */
                padding: 13px 18px;
                min-height: 44px;
                /* iOS tap target */
            }

            .send-btn {
                width: 44px;
                height: 44px;
                flex-shrink: 0;
            }

            .chat-fab {
                bottom: 20px;
                right: 20px;
                width: 56px;
                height: 56px;
            }

            .chat-fab svg {
                width: 28px;
                height: 28px;
            }

            .cta-title {
                font-size: 20px;
            }

            .pesan-sekarang-btn {
                font-size: 16px;
                padding: 16px 32px;
            }
        }

        @media (max-width: 480px) {
            .msg {
                font-size: 15px;
                padding: 11px 13px;
            }

            .chat-input-area {
                padding: 10px 12px;
                padding-bottom: max(10px, env(safe-area-inset-bottom));
            }
        }

        /* ‚≠ê iOS SPECIFIC FIXES */
        @supports (-webkit-touch-callout: none) {
            .chat-window {
                height: 100dvh !important;
            }

            /* Prevent iOS rubber band scrolling */
            .chat-window.open {
                position: fixed;
                overflow: hidden;
            }

            .chat-messages {
                overscroll-behavior: contain;
            }
        }

        /* Prevent body scroll when chat is open on mobile */
        body.chat-open {
            overflow: hidden !important;
            position: fixed;
            width: 100%;
            height: 100%;
            touch-action: none;
        }

        @media (max-width: 768px) {

            /* Ensure chat is above everything on mobile */
            .chat-window.open {
                z-index: 9999;
            }

            .chat-fab {
                z-index: 9998;
            }

            /* Better keyboard handling */
            .chat-input-area input:focus {
                transform: translateZ(0);
                -webkit-transform: translateZ(0);
            }
        }

        /* DEBUG - Hidden */
        .debug-console {
            display: none;
        }

        /* LIVE NOTIFICATION POPUP */
        .live-notification {
            position: fixed;
            bottom: 100px;
            left: 20px;
            background: white;
            padding: 14px 18px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            display: none;
            align-items: center;
            gap: 12px;
            z-index: 1001;
            max-width: 320px;
            animation: slideInLeft 0.5s ease;
            transition: bottom 0.3s ease, top 0.3s ease, left 0.3s ease, right 0.3s ease;
        }

        .live-notification.show {
            display: flex;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-100%);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .notification-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, #25D366, #128C7E);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
            min-width: 0;
        }

        .notification-name {
            font-size: 14px;
            font-weight: 700;
            color: #333;
            margin-bottom: 2px;
        }

        .notification-text {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }

        .notification-time {
            font-size: 11px;
            color: #999;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .live-notification {
                left: 10px;
                right: 10px;
                max-width: calc(100vw - 20px);
                bottom: 100px;
            }

            .live-notification.show {
                display: flex;
            }

            /* Hide notification when chat is open on mobile */
            .chat-window.open~.live-notification {
                display: none !important;
            }
        }

        @media (max-width: 480px) {
            .live-notification {
                padding: 12px 14px;
                bottom: 85px;
            }

            .notification-avatar {
                width: 38px;
                height: 38px;
                font-size: 18px;
            }

            .notification-name {
                font-size: 13px;
            }

            .notification-text {
                font-size: 11px;
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <!-- Image 1 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bsogmh5mbsohc4wpo9_2/LHulaXmJfaDKhc7LHDRpHL8wd4fr9WR0eusxsRavbbLA.jpg"
                loading="lazy">
        </div>

        <!-- Image 2 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bsogmh5mbsohc4wpo9_2/LHDXdmUCut2fpALHDRFFxoTAmDuzRzmL6MyXUgAFKg.jpg"
                loading="lazy">
        </div>

        <!-- Image 3 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bsogmh5mbsohc4wpo9_2/LHDTiwbVQjIuhdaLHDRgJz3m4VZJP9SZWzfY5NDLc7g.jpg"
                loading="lazy">
        </div>

        <!-- Image 4 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bsogmh5mbsohc4wpo9_2/LHDTvp5iXVatLlBLHDukvc56IBrfJFSr2WMbs2hMo2Ig.jpg"
                loading="lazy">
        </div>

        <!-- Image 5 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bsogmh5mbsohc4wpo9_2/LHDmjfeGbbQGL7eLHDRoNrrLoLU6dCTM2u30UeCQxSlQ.jpg"
                loading="lazy">
        </div>

        <!-- Image 6 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bsogmh5mbsohc4wpo9_2/C5PgollmVhWdsJ8C5g4oEKubkEr1kR7W5sxGc3SBOCw.jpg"
                loading="lazy">
        </div>

        <!-- Image 7 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bsogmh5mbsohc4wpo9_2/C5PZRugje48lfkIC5g4UlDNgo89YRZSySHBDpRFude1g.jpg"
                loading="lazy">
        </div>

        <!-- Image 8 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bsogmh5mbsohc4wpo9_2/LHDTiwbVQjIuhdaLHDBBJ0v97IaduPSgGhWpFufNQfUQ.jpg"
                loading="lazy">
        </div>

        <!-- Image 9 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bsogmh5mbsohc4wpo9_2/LHulaXmJfaDKhc7LHDBg0xPdbzfpVdRX2CL2AQ9pQ7g.jpg"
                loading="lazy">
        </div>

        <!-- Image 10 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bsogmh5mbsohc4wpo9_2/CHRYgKC08lqKwhFCCHds2kp7IsYdjpARruUsRitY7JcuA.jpg"
                loading="lazy">
        </div>

        <!-- Image 11 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bsogmh5mbsohc4wpo9_2/LHDjRkS0fBaouCHjLHDMOQt3EDtXd6TxCatbBkdHrZNQ.jpg"
                loading="lazy">
        </div>

        <!-- CTA SECTION - TRIGGER AUTO OPEN -->
        <div class="cta-section" id="ctaSection">
            <!-- PANAH DEKORATIF -->
            <div class="animated-arrows-container">
                <div class="arrow-wrapper">
                    <div class="arrow-container">
                        <div class="arrow-group">
                            <!-- Arrow kiri dengan animasi -->
                            <div class="arrow arrow-left floating-arrow">
                                <div class="arrow-inner">
                                    <svg viewBox="-4 -2 34 54">
                                        <path d="M0,31 L7,31 L7,0 L19,0 L19,31 L26,31 L13,48 L0,31 L7,31"
                                            style="stroke:black;fill:red;stroke-width:4"></path>
                                    </svg>
                                </div>
                            </div>

                            <!-- Arrow kanan dengan animasi -->
                            <div class="arrow arrow-right floating-arrow">
                                <div class="arrow-inner">
                                    <svg viewBox="-4 -2 34 54">
                                        <path d="M0,31 L7,31 L7,0 L19,0 L19,31 L26,31 L13,48 L0,31 L7,31"
                                            style="stroke:black;fill:red;stroke-width:4"></path>
                                    </svg>
                                </div>
                            </div>

                            <!-- Arrow tengah dengan animasi -->
                            <div class="arrow arrow-center floating-arrow">
                                <div class="arrow-inner">
                                    <svg viewBox="-4 -2 34 54">
                                        <path d="M0,31 L7,31 L7,0 L19,0 L19,31 L26,31 L13,48 L0,31 L7,31"
                                            style="stroke:black;fill:red;stroke-width:4"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- COUNTDOWN TIMER -->
            <div class="countdown-container">
                <div class="countdown-label">‚ö° PROMO BERAKHIR DALAM:</div>
                <div class="countdown-timer">
                    <div class="countdown-item">
                        <div class="countdown-value" id="hours">00</div>
                        <div class="countdown-unit">Jam</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="minutes">00</div>
                        <div class="countdown-unit">Menit</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="seconds">00</div>
                        <div class="countdown-unit">Detik</div>
                    </div>
                </div>
            </div>

            <!-- STOCK ALERT -->
            <div class="stock-alert">
                <span class="emoji">üì¶</span> <span id="stockText">Stok hari ini tinggal 12 paket!</span>
            </div>

            <div class="cta-title">üî• Promo Terbatas Hari Ini!</div>
            <div class="cta-subtitle">Dapatkan senyum impian Anda dengan harga spesial</div>
            <button class="pesan-sekarang-btn" onclick="openChatAndStartOrder()">
                <span>üí¨</span>
                <span id="btnText">PESAN SEKARANG</span>
                <span id="btnSpinner" style="display:none;">
                    <div class="spinner"></div>
                </span>
            </button>
        </div>

        <!-- GIF Section -->
        <div class="section">
            <img src="//gif.berduflare.com/gif/blix4bb4blnyu0v2rz/Ci5kYtrd4uQ6h7XCi5wgtqALsNW6H0SEkbWUehCteA.gif#dc=0574cc&w=600&h=200"
                loading="lazy">
        </div>

        <!-- Image 12 -->
        <div class="section">
            <img src="//brdsg.com/img/800/blix4bb4blnyu0v2rz/Ci5TWk6PFz7sfspCi5wy8OF5EHCRMMR1aWt8iGKKRpg.jpg"
                loading="lazy">
        </div>

        <!-- Image 13 -->
        <div class="section">
            <img src="//brdsg.com/img/800/bq15x70mbq3gn1h7k9_1/CsNMXApcpwKusZoCsNwXVuvhK4WU5vSC6pkk2ZV9OPEg.png"
                loading="lazy">
        </div>
    </div>

    <!-- FLOATING CHAT BUTTON -->
    <button class="chat-fab" onclick="toggleChat()" title="Chat dengan Admin">
        <svg viewBox="0 0 24 24">
            <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
        </svg>
    </button>

    <!-- LIVE NOTIFICATION POPUP -->
    <div class="live-notification" id="liveNotification">
        <div class="notification-avatar">üéâ</div>
        <div class="notification-content">
            <div class="notification-name" id="notifName">Loading...</div>
            <div class="notification-text" id="notifText">Loading...</div>
            <div class="notification-time" id="notifTime">Baru saja</div>
        </div>
    </div>

    <!-- CHAT WINDOW -->
    <div class="chat-window" id="chatWin">
        <div class="chat-header">
            <div class="chat-header-info">
                <div>
                    <div class="chat-title">Admin Veneer Gigi</div>
                    <div class="chat-status">Online</div>
                </div>
            </div>
            <button class="chat-close" onclick="toggleChat()">‚úï</button>
        </div>

        <div class="chat-messages" id="chatBox"></div>

        <div class="typing" id="typing">
            <div class="typing-dots">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
            <span style="color: #666; font-size: 12px; margin-left: 4px;">mengetik...</span>
        </div>

        <div class="chat-actions" id="chatActions"></div>

        <div class="chat-input-area">
            <input type="text" id="userInput" placeholder="Ketik pesan..."
                onkeypress="if(event.key==='Enter') sendToAI()" autocomplete="off">
            <button class="send-btn" onclick="sendToAI()" id="sendBtn">
                <svg viewBox="0 0 24 24">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
                </svg>
            </button>
        </div>
    </div>

    <div class="debug-console" id="debugConsole">
        <div id="debugLogs"></div>
    </div>

    <script>
        const API_BASE = "/api";

        let sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        let isProcessing = false;
        let messageQueue = [];
        let cache = new Map();

        const CONFIG = {
            CACHE_MAX_SIZE: 50,
            CACHE_TTL: 5 * 60 * 1000,
            MESSAGE_QUEUE_MAX: 5,
            REQUEST_TIMEOUT: 15000,
            DEBUG_MODE: false
        };

        const chatWin = document.getElementById('chatWin');
        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');
        const typing = document.getElementById('typing');
        const chatActions = document.getElementById('chatActions');
        const btnText = document.getElementById('btnText');
        const btnSpinner = document.getElementById('btnSpinner');
        const sendBtn = document.getElementById('sendBtn');

        function debugLog(message, type = 'info') {
            if (CONFIG.DEBUG_MODE) {
                console[type === 'error' ? 'error' : type === 'warning' ? 'warn' : 'log'](message);
            }
        }

        function cacheSet(key, value) {
            if (cache.size >= CONFIG.CACHE_MAX_SIZE) {
                const firstKey = cache.keys().next().value;
                cache.delete(firstKey);
            }
            cache.set(key, { data: value, timestamp: Date.now() });
        }

        function cacheGet(key) {
            const cached = cache.get(key);
            if (!cached) return null;
            if (Date.now() - cached.timestamp > CONFIG.CACHE_TTL) {
                cache.delete(key);
                return null;
            }
            return cached.data;
        }

        async function fetchWithHeaders(url, options = {}) {
            return fetch(url, {
                ...options,
                headers: {
                    'Content-Type': 'application/json',
                    'Cache-Control': 'no-cache',
                    'Accept': 'application/json'
                }
            });
        }

        function sanitizeInput(text) {
            if (!text) return '';
            let clean = text.replace(/<[^>]*>/g, '');
            clean = clean.replace(/[<>'"]/g, '');
            return clean.substring(0, 500);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function scrollToBottom() {
            requestAnimationFrame(() => {
                chatBox.scrollTo({ top: chatBox.scrollHeight, behavior: 'smooth' });
            });
        }

        function appendMsg(text, sender) {
            if (!text || !text.trim()) return;
            const div = document.createElement('div');
            div.className = `msg ${sender}`;
            let escaped = escapeHtml(text);
            let formatted = escaped.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\\n/g, '\n');
            div.innerHTML = formatted;
            chatBox.appendChild(div);
            scrollToBottom();
        }

        function processAIMessage(message) {
            let displayMessage = message;
            const actions = [];

            const discount15Patterns = [/\[\[APPLY_DISCOUNT_15K\]\]/gi, /\[\[ACTION:apply_diskon_15000\]\]/gi, /POTONGAN ONGKIR 15\.000/gi];
            discount15Patterns.forEach(pattern => {
                if (pattern.test(message)) {
                    actions.push({ type: 'apply_diskon', amount: 15000 });
                    displayMessage = displayMessage.replace(pattern, '');
                }
            });

            const discount20Patterns = [/\[\[APPLY_DISCOUNT_20K\]\]/gi, /\[\[ACTION:apply_diskon_20000\]\]/gi, /POTONGAN ONGKIR 20\.000/gi];
            discount20Patterns.forEach(pattern => {
                if (pattern.test(message)) {
                    actions.push({ type: 'apply_diskon', amount: 20000 });
                    displayMessage = displayMessage.replace(pattern, '');
                }
            });

            displayMessage = displayMessage.replace(/\[\[LOC:([^\]]+)\]\]/g, '');

            if (displayMessage.includes('[[SHOW_COURIER_PICK]]')) {
                actions.push({ type: 'show_courier_pick' });
                displayMessage = displayMessage.replace('[[SHOW_COURIER_PICK]]', '');
            }

            if (displayMessage.includes('[[SHOW_PAYMENT_PICK]]')) {
                actions.push({ type: 'show_payment_pick' });
                displayMessage = displayMessage.replace('[[SHOW_PAYMENT_PICK]]', '');
            }

            return { display: displayMessage.trim(), actions: actions };
        }

        async function executeAction(action) {
            if (action.type === 'apply_diskon') {
                await applyDiskon(action.amount);
            }
        }

        async function applyDiskon(amount) {
            try {
                const res = await fetchWithHeaders(`${API_BASE}/apply_diskon`, {
                    method: 'POST',
                    body: JSON.stringify({ session_id: sessionId, diskon: amount })
                });
                if (res.ok) {
                    const data = await res.json();
                    debugLog('Diskon applied: ' + data.status, 'success');
                }
            } catch (error) {
                debugLog('Error applying diskon: ' + error.message, 'error');
            }
        }

        function toggleChat(forceOpen = false) {
            if (forceOpen) {
                chatWin.classList.add('open');
            } else {
                chatWin.classList.toggle('open');
            }

            // Handle body scroll on mobile
            if (window.innerWidth <= 768) {
                if (chatWin.classList.contains('open')) {
                    document.body.classList.add('chat-open');
                } else {
                    document.body.classList.remove('chat-open');
                }
            }

            if (chatWin.classList.contains('open')) {
                // ‚≠ê FIXED: Delay focus to ensure keyboard doesn't hide input
                setTimeout(() => {
                    userInput.focus();
                }, 300);
            }

            updateNotificationPosition();
        }

        function calculateTypingDelay(text) {
            const baseDelay = 1000;
            const charsPerSecond = 50;
            const calculatedDelay = (text.length / charsPerSecond) * 1000;
            const finalDelay = Math.min(Math.max(baseDelay, calculatedDelay), 4000);
            return finalDelay + (Math.random() * 600 + 200);
        }

        async function sendToAI(customText = null) {
            const text = customText || userInput.value.trim();
            if (!text) return;

            const cleanText = sanitizeInput(text);
            if (!cleanText) return;

            if (isProcessing) {
                if (messageQueue.length < CONFIG.MESSAGE_QUEUE_MAX) {
                    messageQueue.push(text);
                } else {
                    appendMsg('‚ö†Ô∏è Tunggu sebentar ya...', 'bot');
                }
                return;
            }

            if (!customText) userInput.value = "";
            appendMsg(cleanText, 'user');
            chatActions.style.display = "none";

            await new Promise(resolve => setTimeout(resolve, Math.random() * 600 + 600));

            typing.classList.add('active');
            userInput.disabled = true;
            sendBtn.disabled = true;

            isProcessing = true;

            try {
                const cacheKey = `msg_${sessionId}_${text.substring(0, 50)}`;
                const cachedResponse = cacheGet(cacheKey);

                if (cachedResponse) {
                    await processResponse(cachedResponse);
                    return;
                }

                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), CONFIG.REQUEST_TIMEOUT);

                const res = await fetchWithHeaders(`${API_BASE}/chat`, {
                    method: 'POST',
                    body: JSON.stringify({ session_id: sessionId, message: cleanText }),
                    signal: controller.signal
                });

                clearTimeout(timeoutId);

                if (!res.ok) throw new Error(`HTTP ${res.status}`);

                const data = await res.json();
                if (data.status === 'error') throw new Error(data.message || 'Unknown error');

                cacheSet(cacheKey, data);
                await processResponse(data);

            } catch (error) {
                typing.classList.remove('active');
                if (error.name === 'AbortError') {
                    appendMsg("‚è±Ô∏è Koneksi timeout, coba lagi ya.", 'bot');
                } else if (error.message && error.message.includes('pending_block')) {
                    appendMsg("Maaf, nomor ini masih ada pesanan pending. Hubungi admin ya!", 'bot');
                } else {
                    appendMsg("Maaf, ada gangguan. Coba refresh halaman.", 'bot');
                }
            } finally {
                isProcessing = false;
                userInput.disabled = false;
                sendBtn.disabled = false;
                userInput.focus();

                if (messageQueue.length > 0) {
                    const nextMsg = messageQueue.shift();
                    setTimeout(() => sendToAI(nextMsg), 500);
                }
            }
        }

        async function processResponse(data) {
            if (data.messages && data.messages.length > 0) {
                for (let i = 0; i < data.messages.length; i++) {
                    const m = data.messages[i];

                    typing.classList.add('active');

                    const delay = calculateTypingDelay(m.content);
                    await new Promise(resolve => setTimeout(resolve, delay));

                    typing.classList.remove('active');

                    const processed = processAIMessage(m.content);
                    appendMsg(processed.display, 'bot');
                    processed.actions.forEach(action => executeAction(action));

                    if (i < data.messages.length - 1) {
                        await new Promise(resolve => setTimeout(resolve, Math.random() * 300 + 300));
                    }
                }
            } else {
                typing.classList.remove('active');
            }

            if (data.action_type && data.options) {
                await new Promise(resolve => setTimeout(resolve, Math.random() * 500 + 500));
                renderActions(data.action_type, data.options);
            }

            scrollToBottom();
        }

        function formatRupiah(angka) {
            return 'Rp ' + angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.');
        }

        function renderActions(type, options) {
            if (!options || options.length === 0) return;

            chatActions.innerHTML = "";
            chatActions.style.display = "flex";

            options.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = "action-chip";

                let label = opt.label || opt.kurir || opt;
                if (opt.harga) {
                    label += ` (${formatRupiah(opt.harga)})`;
                }

                btn.innerText = label;
                btn.onclick = () => handleAction(type, opt);
                chatActions.appendChild(btn);
            });
        }

        async function handleAction(type, option) {
            const label = option.label || option.kurir || option;
            appendMsg(label, 'user');
            chatActions.style.display = "none";

            await new Promise(resolve => setTimeout(resolve, Math.random() * 500 + 500));

            typing.classList.add('active');
            userInput.disabled = true;
            sendBtn.disabled = true;

            let path = "/chat";
            let payload = { session_id: sessionId };

            if (type === 'pick_lokasi') {
                path = "/select_lokasi";
                payload.lokasi = option;
            } else if (type === 'pick_kurir') {
                path = "/select_kurir";
                payload.kurir = option;
            } else if (type === 'pick_payment') {
                path = "/select_payment";
                payload.payment = option;
            }

            try {
                const res = await fetchWithHeaders(`${API_BASE}${path}`, {
                    method: 'POST',
                    body: JSON.stringify(payload)
                });

                if (!res.ok) throw new Error(`HTTP ${res.status}`);

                const data = await res.json();
                if (data.status === 'error') throw new Error(data.message || 'Unknown error');

                if (data.messages && data.messages.length > 0) {
                    for (let i = 0; i < data.messages.length; i++) {
                        const m = data.messages[i];

                        const delay = calculateTypingDelay(m.content);
                        await new Promise(resolve => setTimeout(resolve, delay));

                        typing.classList.remove('active');

                        const processed = processAIMessage(m.content);
                        appendMsg(processed.display, 'bot');
                        processed.actions.forEach(action => executeAction(action));

                        if (i < data.messages.length - 1) {
                            await new Promise(resolve => setTimeout(resolve, Math.random() * 300 + 300));
                            typing.classList.add('active');
                        }
                    }
                } else {
                    typing.classList.remove('active');
                }

                if (data.action_type && data.options) {
                    await new Promise(resolve => setTimeout(resolve, Math.random() * 500 + 500));
                    renderActions(data.action_type, data.options);
                }

            } catch (error) {
                typing.classList.remove('active');
                if (error.message.includes('pending_block')) {
                    appendMsg("Maaf, nomor ini masih ada pesanan pending. Hubungi admin ya!", 'bot');
                } else {
                    appendMsg("Maaf, ada masalah teknis. Coba lagi ya!", 'bot');
                }
            } finally {
                userInput.disabled = false;
                sendBtn.disabled = false;
            }
        }

        // ‚≠ê FIXED: Improved CTA auto-open
        let hasAutoOpenedChat = false;
        let imagesLoaded = 0;
        let totalImages = 0;

        // ===================================
        // AUTO-OPEN CHAT SYSTEM
        // ===================================
        function setupCTAAutoOpen() {
            const ctaSection = document.getElementById('ctaSection');
            if (!ctaSection) return;

            // Hitung total gambar untuk lazy load
            totalImages = document.querySelectorAll('img[loading="lazy"]').length;
            console.log(`Total images to load: ${totalImages}`);

            // ‚≠ê CRITICAL: Tunggu SEMUA gambar selesai load dulu
            const checkImagesLoaded = () => {
                // Minimal 80% gambar harus load, atau tunggu semua
                const minRequired = Math.ceil(totalImages * 0.8); // 80% dari total gambar

                if (imagesLoaded >= minRequired || imagesLoaded >= totalImages) {
                    console.log(`‚úÖ ${imagesLoaded}/${totalImages} images loaded, waiting 2s before enabling observer`);

                    // ‚≠ê Tambah delay 2 detik setelah gambar load untuk stabilkan layout
                    setTimeout(() => {
                        console.log('üéØ Layout stable, starting CTA observer');
                        startCTAObserver();
                    }, 2000);
                }
            };

            // Monitor gambar yang sudah di-load
            document.querySelectorAll('img[loading="lazy"]').forEach(img => {
                // Cek jika sudah complete (sudah di-cache)
                if (img.complete) {
                    imagesLoaded++;
                    console.log(`üì∏ Image already loaded (${imagesLoaded}/${totalImages})`);
                    checkImagesLoaded();
                    return;
                }

                img.addEventListener('load', () => {
                    imagesLoaded++;
                    console.log(`üì∏ Image loaded (${imagesLoaded}/${totalImages})`);
                    checkImagesLoaded();
                });

                // Juga handle error
                img.addEventListener('error', () => {
                    imagesLoaded++;
                    console.log(`‚ùå Image failed to load (${imagesLoaded}/${totalImages})`);
                    checkImagesLoaded();
                });
            });

            // Fallback: Jika setelah 8 detik masih belum cukup gambar load, paksa start
            setTimeout(() => {
                if (imagesLoaded < Math.ceil(totalImages * 0.8)) {
                    console.log('‚ö†Ô∏è Timeout: Forcing observer start despite incomplete loading');
                    startCTAObserver();
                }
            }, 8000); // 8 detik fallback
        }

        function startCTAObserver() {
            const ctaSection = document.getElementById('ctaSection');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    console.log('üëÅÔ∏è CTA Intersection:', {
                        isIntersecting: entry.isIntersecting,
                        ratio: entry.intersectionRatio.toFixed(2),
                        inViewport: entry.boundingClientRect.top < window.innerHeight,
                        scrollY: window.scrollY
                    });

                    // ‚≠ê CRITICAL: Syarat lebih ketat untuk avoid false trigger
                    if (entry.isIntersecting &&
                        entry.intersectionRatio >= 0.6 && // ‚≠ê Naikin dari 0.5 jadi 0.6
                        window.scrollY > 500 && // ‚≠ê User harus scroll minimal 500px (lebih jauh)
                        !hasAutoOpenedChat &&
                        !chatWin.classList.contains('open')) {

                        console.log('üéØ Conditions met, will open chat in 3s');

                        setTimeout(() => {
                            if (!chatWin.classList.contains('open') && !hasAutoOpenedChat) {
                                console.log('üöÄ Opening chat now!');
                                openChatFromCTA();
                            }
                        }, 3000); // ‚≠ê Delay 3 detik (naikin dari 2 detik)
                    }
                });
            }, {
                threshold: [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],
                rootMargin: '-100px 0px -150px 0px' // ‚≠ê Lebih ketat lagi
            });

            observer.observe(ctaSection);

            // Juga tambah scroll listener untuk extra safety
            window.addEventListener('scroll', handleScrollForCTA, { passive: true });
        }

        function handleScrollForCTA() {
            if (hasAutoOpenedChat || chatWin.classList.contains('open')) return;

            const ctaSection = document.getElementById('ctaSection');
            if (!ctaSection) return;

            const rect = ctaSection.getBoundingClientRect();
            const windowHeight = window.innerHeight;

            // ‚≠ê CTA harus BENAR-BENAR di tengah layar DAN user sudah scroll jauh
            const isInMiddleViewport = rect.top >= windowHeight * 0.2 && rect.top <= windowHeight * 0.6; // Tengah layar
            const hasScrolledEnough = window.scrollY > 800; // ‚≠ê Naikin jadi 800px

            if (isInMiddleViewport && hasScrolledEnough && !hasAutoOpenedChat) {
                console.log('üì± Scroll trigger: Opening chat');
                hasAutoOpenedChat = true;

                setTimeout(() => {
                    if (!chatWin.classList.contains('open')) {
                        openChatFromCTA();
                    }
                }, 2000); // 2 detik delay
            }
        }

        function openChatFromCTA() {
            hasAutoOpenedChat = true;
            toggleChat(true);

            setTimeout(() => {
                const welcomeMsg = "Halo! üëã\n\nWah, Anda sampai ke bagian promo ya! üòä\n\nSaya lihat tertarik dengan veneer gigi kami. Ada yang bisa saya bantu?";
                appendMsg(welcomeMsg, 'bot');
            }, 500);
        }

        // Panggil setup saat DOM ready
        document.addEventListener('DOMContentLoaded', setupCTAAutoOpen);

        function openChatAndStartOrder() {
            toggleChat(true);
            setTimeout(() => {
                const welcomeMsg = "Halo! üëã\n\nTerima kasih sudah klik tombol pesan! üòä\n\nSaya siap membantu Anda. Silakan mulai order.";
                appendMsg(welcomeMsg, 'bot');
            }, 500);
        }

        // LAZY LOAD IMAGES
        document.addEventListener('DOMContentLoaded', () => {
            const images = document.querySelectorAll('img[loading="lazy"]');
            const imageObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src || img.src;
                        imageObserver.unobserve(img);
                    }
                });
            });
            images.forEach(img => imageObserver.observe(img));
        });

        debugLog(`Session: ${sessionId}`, 'success');

        // COUNTDOWN TIMER (DAILY RESET)
        function updateCountdown() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setHours(24, 0, 0, 0);

            const diff = tomorrow - now;

            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('hours').textContent = String(hours).padStart(2, '0');
            document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
            document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);

        // DYNAMIC STOCK SCARCITY
        function updateStock() {
            const stockElement = document.getElementById('stockText');
            const stocks = [
                '‚ö†Ô∏è Stok hari ini tinggal 8 paket!',
                '‚ö†Ô∏è Stok hari ini tinggal 12 paket!',
                '‚ö†Ô∏è Stok hari ini tinggal 6 paket!',
                '‚ö†Ô∏è Stok hari ini tinggal 15 paket!',
                '‚ö†Ô∏è Stok hari ini tinggal 10 paket!',
            ];

            const hour = new Date().getHours();
            const index = hour % stocks.length;
            stockElement.textContent = stocks[index];
        }

        updateStock();
        setInterval(updateStock, 60000);

        // SOCIAL PROOF NOTIFICATIONS
        const cities = [
            'Jakarta', 'Surabaya', 'Bandung', 'Medan', 'Bekasi',
            'Tangerang', 'Depok', 'Semarang', 'Palembang', 'Makassar',
            'Bogor', 'Yogyakarta', 'Malang', 'Bali', 'Balikpapan'
        ];

        const names = [
            'Ibu Siti', 'Mbak Ani', 'Mas Budi', 'Kak Sarah', 'Pak Agus',
            'Ibu Rina', 'Mas Denny', 'Mbak Lisa', 'Kak Maya', 'Ibu Dewi',
            'Mas Rudi', 'Mbak Tini', 'Pak Hendra', 'Ibu Yuni', 'Kak Fitri'
        ];

        const actions = [
            'baru saja memesan',
            'baru saja membeli',
            'baru saja checkout',
            'baru saja order'
        ];

        function showSocialProof() {
            const notification = document.getElementById('liveNotification');
            const notifName = document.getElementById('notifName');
            const notifText = document.getElementById('notifText');
            const notifTime = document.getElementById('notifTime');

            const randomCity = cities[Math.floor(Math.random() * cities.length)];
            const randomName = names[Math.floor(Math.random() * names.length)];
            const randomAction = actions[Math.floor(Math.random() * actions.length)];
            const randomQty = Math.floor(Math.random() * 3) + 1;

            notifName.textContent = `${randomName} - ${randomCity}`;
            notifText.textContent = `${randomAction} ${randomQty} paket Veneer Gigi`;
            notifTime.textContent = 'Baru saja';

            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }

        setTimeout(showSocialProof, 8000);

        function scheduleNextNotification() {
            const delay = Math.floor(Math.random() * 20000) + 20000;
            setTimeout(() => {
                if (!chatWin.classList.contains('open')) {
                    showSocialProof();
                }
                scheduleNextNotification();
            }, delay);
        }

        scheduleNextNotification();

        function updateNotificationPosition() {
            const notification = document.getElementById('liveNotification');
            const isMobile = window.innerWidth <= 768;

            if (chatWin.classList.contains('open') && isMobile) {
                notification.classList.remove('show');
                return;
            }

            if (chatWin.classList.contains('open')) {
                if (!isMobile) {
                    notification.style.bottom = 'auto';
                    notification.style.top = '20px';
                    notification.style.left = '20px';
                    notification.style.right = 'auto';
                }
            } else {
                notification.style.top = 'auto';
                notification.style.bottom = isMobile ? '100px' : '100px';
                notification.style.left = isMobile ? '10px' : '20px';
                notification.style.right = isMobile ? '10px' : 'auto';
            }
        }

        window.addEventListener('resize', () => {
            if (document.getElementById('liveNotification').classList.contains('show')) {
                updateNotificationPosition();
            }
        });

        // ‚≠ê REMOVED OLD KEYBOARD HANDLERS - Now handled by CSS flexbox
        // The new CSS with flex-shrink: 0 and min-height: 0 handles keyboard automatically
    </script>
</body>

</html>